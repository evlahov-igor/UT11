
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;

	УправлениеЭлементами();
	
	// << 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449
	КР_ПриСозданииНаСервереДополнительно(Отказ, СтандартнаяОбработка);
	// >> 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОткрытьСпособыОбеспеченияПотребностей(Команда)
	
	ОткрытьФорму("Справочник.СпособыОбеспеченияПотребностей.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСхемыОбеспечения(Команда)
	
	ОткрытьФорму("Справочник.СхемыОбеспечения.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьЗоныДоставки(Команда)
	
	ОткрытьФорму("Справочник.ЗоныДоставки.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьТипыТранспортныхСредств(Команда)

	ОткрытьФорму("Справочник.ТипыТранспортныхСредств.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьПравилаРазмещения(Команда)

	ОткрытьФорму("РегистрСведений.ПравилаРазмещенияТоваровВЯчейках.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьТипоразмерыЯчеек(Команда)

	ОткрытьФорму("Справочник.ТипоразмерыЯчеек.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьПрогнозыРасходаУпаковок(Команда)
	
	ОткрытьФорму("РегистрСведений.ПрогнозыРасходаУпаковок.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ПриВыполненииКоманды(Команда)
	
	СкладыКлиентЛокализация.ПриВыполненииКоманды_ПанельСправочниковСклад(Команда, ЭтаФорма);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УправлениеЭлементами()
	
	ПравоДоступаЗоныДоставки 				= ПравоДоступа("Просмотр", Метаданные.Справочники.ЗоныДоставки);
	ПравоДоступаТипыТранспортныхСредств 	= ПравоДоступа("Просмотр", Метаданные.Справочники.ТипыТранспортныхСредств);
	ПравоДоступаПравилаРазмещения 			= ПравоДоступа("Просмотр", Метаданные.РегистрыСведений.ПравилаРазмещенияТоваровВЯчейках);
	ПравоДоступаТипоразмерыЯчеек 			= ПравоДоступа("Просмотр", Метаданные.Справочники.ТипоразмерыЯчеек);
	ПравоДоступаПрогнозыРасходаУпаковок 	= ПравоДоступа("Просмотр", Метаданные.РегистрыСведений.ПрогнозыРасходаУпаковок);
	ПравоДоступаСпособыОбеспеченияПотребностей = ПравоДоступа("Изменение", Метаданные.Справочники.СпособыОбеспеченияПотребностей);
	ПравоДоступаСхемыОбеспечения               = ПравоДоступа("Изменение", Метаданные.РегистрыСведений.СхемыОбеспечения);
	
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьЗоныДоставки",
		"Видимость",
		ПравоДоступаЗоныДоставки);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьТипыТранспортныхСредств",
		"Видимость",
		ПравоДоступаТипыТранспортныхСредств);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьПравилаРазмещения",
		"Видимость",
		ПравоДоступаПравилаРазмещения);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьТипоразмерыЯчеек",
		"Видимость",
		ПравоДоступаТипоразмерыЯчеек);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьПрогнозыРасходаУпаковок",
		"Видимость",
		ПравоДоступаПрогнозыРасходаУпаковок);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьСпособыОбеспеченияПотребностей",
		"Видимость",
		ПравоДоступаСпособыОбеспеченияПотребностей);
	ОбщегоНазначенияКлиентСервер.УстановитьСвойствоЭлементаФормы(Элементы,
		"ОткрытьСхемыОбеспечения",
		"Видимость",
		ПравоДоступаСхемыОбеспечения);
		
	ЕстьДанныеДляОтображения =
		ПолучитьФункциональнуюОпцию("ИспользоватьУпаковкиНоменклатуры")
		ИЛИ ПолучитьФункциональнуюОпцию("ИспользоватьУправлениеДоставкой")
		ИЛИ ПолучитьФункциональнуюОпцию("ИспользоватьАдресноеХранение")
		ИЛИ ПолучитьФункциональнуюОпцию("ИспользоватьВнутреннееПотребление")
		ИЛИ ПолучитьФункциональнуюОпцию("ИспользоватьРасширенноеОбеспечениеПотребностей")
		ИЛИ ПравоДоступаЗоныДоставки
		ИЛИ ПравоДоступаТипыТранспортныхСредств
		ИЛИ ПравоДоступаПравилаРазмещения
		ИЛИ ПравоДоступаТипоразмерыЯчеек
		ИЛИ ПравоДоступаПрогнозыРасходаУпаковок;
		
	СкладыЛокализация.УправлениеЭлементами_ПанельСправочниковСклад(Элементы, ЕстьДанныеДляОтображения);
		
	Элементы.ГруппаНеУстановленыНеобходимыеНастройки.Видимость = НЕ ЕстьДанныеДляОтображения;
	
КонецПроцедуры

#КонецОбласти

#Область КР_ДополнительныеПроцедурыИФункции

#Область КР_ОбработчикиСобытийФормы

// << 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449
&НаСервере
Процедура КР_ПриСозданииНаСервереДополнительно(Отказ, СтандартнаяОбработка)
	
	КомандаФормы = КР_МетодыМодификацииФорм.ДобавитьКомандуФормы(
		ЭтотОбъект, "КР_ОткрытьЗоныПересчетаТоваров", НСтр("ru = 'Зоны пересчета товаров'"));
	ЭлементФормы = КР_МетодыМодификацииФорм.ВставитьЭлементФормы(
		ЭтотОбъект, КомандаФормы, Элементы.ГруппаСклад);
	ЭлементФормы.Вид = ВидКнопкиФормы.Гиперссылка;
	
	ДекорацияФормы = КР_МетодыМодификацииФорм.ВставитьДекорациюФормы(
		ЭтотОбъект, "КР_ОткрытьЗоныПересчетаТоваровПодсказка", Элементы.ГруппаСклад);
	ДекорацияФормы.Заголовок = НСтр("ru = 'Зоны пересчета товаров на складах.'");
	ДекорацияФормы.ЦветТекста = ЦветаСтиля.ПоясняющийТекст;
	
КонецПроцедуры // >> 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449

#КонецОбласти

#Область ОбработчикиКомандФормы

// << 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449
&НаКлиенте
Процедура КР_ОткрытьЗоныПересчетаТоваров(Команда)

	ОткрытьФорму("Справочник.КР_ЗоныПересчетаТоваров.ФормаСписка", , ЭтотОбъект);
	
КонецПроцедуры // >> 27.04.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-1449

#КонецОбласти

#КонецОбласти
