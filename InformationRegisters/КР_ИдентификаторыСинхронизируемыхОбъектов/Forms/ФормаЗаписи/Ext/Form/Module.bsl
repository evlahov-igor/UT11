////////////////////////////////////////////////////
//// Модуль формы записи регистра сведений "КР_ИдентификаторыСинхронизируемыхОбъектов"
//// Создан: 15.12.2022 Марченко С.Н., КРОК, JIRA№A2105505-918
//// Разработка по ФДР С71.004 Интеграция УТ 10.3 Логистика - УТ 11, КритичныйПоступления и ГТД импорт

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
		
КонецПроцедуры  

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	УстановитьВидимостьДоступностьЭлементовФормы();
		
КонецПроцедуры

#КонецОбласти 

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура СвязьПоТекстуПриИзменении(Элемент)
	
	Если Запись.СвязьПоТексту Тогда 
		Запись.Идентификатор = Неопределено;    
	Иначе 
		Запись.ТекстовоеПредставлениеИдентификатора = Неопределено;    
	КонецЕсли;
	
	УстановитьВидимостьДоступностьЭлементовФормы();
	
КонецПроцедуры

&НаКлиенте
Процедура ТекстовоеПредставлениеИдентификатораПриИзменении(Элемент)
	
	СформироватьИдентификаторПоТекстовомуПредставлению();
	
КонецПроцедуры

#КонецОбласти 

#Область СлужебныеПроцедурыИФункции 

&НаКлиенте
Процедура УстановитьВидимостьДоступностьЭлементовФормы()
	
	Элементы.ТекстовоеПредставлениеИдентификатора.Видимость = Запись.СвязьПоТексту;
	Элементы.Идентификатор.Доступность = Не Запись.СвязьПоТексту;
	
КонецПроцедуры

&НаСервере
Процедура СформироватьИдентификаторПоТекстовомуПредставлению()
	
	Если ПустаяСтрока(Запись.ТекстовоеПредставлениеИдентификатора) Тогда 
		Запись.Идентификатор = Неопределено;
		Возврат;	
	КонецЕсли;	
	
	Запись.Идентификатор = КР_ОбщегоНазначениеСервер.GUIDИзСтроки(
		Запись.ТекстовоеПредставлениеИдентификатора);
		
КонецПроцедуры

#КонецОбласти
