////////////////////////////////////////////////////
//// Модуль объекта документа "КР_ДвижениеКоробов"
//// Создан: 02.12.2022 Марченко С.Н., КРОК, JIRA№A2105505-912
//// Разработка по ФДР С41.011, Интеграция УТ10-УТ11 по складским документам, движение коробов

#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	ПроведениеДокументов.ПередЗаписьюДокумента(ЭтотОбъект, РежимЗаписи, РежимПроведения);

	// Проверим если установлен запрет ввода документа то запретим его созрание/изменение 
	// Проверяем именно перед записью так как обработка проверки заполнения может не выполняться 
	ЗапретВводаСДаты = КР_ДополнительныеНастройкиПовтИсп.Значение("ДатаНачалаДвиженияКоробовПоДокументамУТ11", 
		Ложь); // не проверяем заполнение. До какого-то момента будет пустым
	Если ЗначениеЗаполнено(ЗапретВводаСДаты) 
		И Дата >= ЗапретВводаСДаты Тогда 
		
		ТекстСообщения = НСтр("ru = 'Дата документа больше или равна дате начала формирования движений " +
			"по данным документов УТ11, движения по регистру ""Короба на складах""'");
		ОбщегоНазначения.СообщитьПользователю(ТекстСообщения, , , , Отказ);
		
	КонецЕсли;	
	
КонецПроцедуры

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	ПроведениеДокументов.ОбработкаПроведенияДокумента(ЭтотОбъект, Отказ);
	
КонецПроцедуры

Процедура ОбработкаУдаленияПроведения(Отказ)
		
	ПроведениеДокументов.ОбработкаУдаленияПроведенияДокумента(ЭтотОбъект, Отказ);
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	ПроведениеДокументов.ПриЗаписиДокумента(ЭтотОбъект, Отказ);   
		
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#КонецОбласти

#КонецЕсли