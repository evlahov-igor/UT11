
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// СтандартныеПодсистемы.ДополнительныеОтчетыИОбработки
	ПодключаемыеКоманды.ПриСозданииНаСервере(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.ДополнительныеОтчетыИОбработки
	
	// << 26.08.2022, Мельников А.А., КРОК, Jira№ A2105505-325
	КР_ПриСозданииНаСервереДополнительно();
	// >> 26.08.2022, Мельников А.А., КРОК, Jira№ A2105505-325
	
	// --> Евлахов Игорь Николаевич (Начало) 23.08.2023
	// Задача #3069
	злСобытияФормОценкаПроизводительности.ПриСозданииНаСервере(ЭтотОбъект, Отказ, СтандартнаяОбработка);
	// <-- Евлахов Игорь Николаевич (Конец) 23.08.2023
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	// --> Евлахов Игорь Николаевич (Начало) 23.08.2023
	// Задача #3069
	злСобытияФормОценкаПроизводительностиКлиент.ПриОткрытии(ЭтотОбъект, Отказ);
	// <-- Евлахов Игорь Николаевич (Конец) 23.08.2023
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

// СтандартныеПодсистемы.ПодключаемыеКоманды
&НаКлиенте
Процедура Подключаемый_ВыполнитьКоманду(Команда)
	ПодключаемыеКомандыКлиент.НачатьВыполнениеКоманды(ЭтотОбъект, Команда, Элементы.Список);
КонецПроцедуры
&НаКлиенте
Процедура Подключаемый_ПродолжитьВыполнениеКомандыНаСервере(ПараметрыВыполнения, ДополнительныеПараметры) Экспорт
	ВыполнитьКомандуНаСервере(ПараметрыВыполнения);
КонецПроцедуры
&НаСервере
Процедура ВыполнитьКомандуНаСервере(ПараметрыВыполнения)
	ПодключаемыеКоманды.ВыполнитьКоманду(ЭтотОбъект, ПараметрыВыполнения, Элементы.Список);
КонецПроцедуры
&НаКлиенте
Процедура Подключаемый_ОбновитьКоманды()
	ПодключаемыеКомандыКлиентСервер.ОбновитьКоманды(ЭтотОбъект, Элементы.Список);
КонецПроцедуры
// Конец СтандартныеПодсистемы.ПодключаемыеКоманды

#КонецОбласти

#Область КР_ДобавленныеПроцедурыИФункции

// << 25.08.2022, Мельников А.А., КРОК, Jira№ A2105505-325 
// Для добавления новых реквизтов на форму
&НаСервере
Процедура КР_ПриСозданииНаСервереДополнительно() 
	
	// << 16.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-325
	УстановитьОтборЭтоВодитель();
	// >> 16.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-325
	
	// << 29.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-570
	КР_ПодразделениеЭлемент = КР_МетодыМодификацииФорм.ВставитьЭлементФормы(
		ЭтотОбъект, "Список.КР_Подразделение", Элементы.Список);
	
	КР_ДолжностьЭлемент = КР_МетодыМодификацииФорм.ВставитьЭлементФормы(
		ЭтотОбъект, "Список.КР_Должность", Элементы.Список);
	
	КР_УволенЭлемент = КР_МетодыМодификацииФорм.ВставитьЭлементФормы(
		ЭтотОбъект, "Список.КР_Уволен", Элементы.Список);
	// >> 29.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-570
	
КонецПроцедуры

// << 16.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-325
&НаСервере
Процедура УстановитьОтборЭтоВодитель()
	
	// Рефакторинг по замечаниям код-ревью
	// Использован платформенный метод РольДоступна(), т.к. роль
	// используется как маркер выполнения логики алгоритма.
	// Использование метода Пользователи.РолиДоступны() не подходит, т.к.
	// для полноправного пользователя логика не должна выполняться.
	
	Если РольДоступна("КР_ДобавлениеИзменениеВодителей") Тогда
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список, "КР_ЭтоВодитель", Истина, ВидСравненияКомпоновкиДанных.Равно);
	КонецЕсли;
	
	// << 09.01.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-325
	Если РольДоступна("КР_ДобавлениеИзменениеВодителейРозницы") Тогда
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список, "КР_ЭтоВодительРозницы", Истина, ВидСравненияКомпоновкиДанных.Равно);
	КонецЕсли;
	// >> 09.01.2023, Маскаев П.Ю., КРОК, Jira№ A2105505-325
	
КонецПроцедуры // >> 16.09.2022, Маскаев П.Ю., КРОК, Jira№ A2105505-325

#КонецОбласти